<!DOCTYPE html>
<html lang="pr-br">
<head>
    <%-include('partials/head.ejs')%>
</head>
<body class="bodyA">

<a href="/"><button>Index</button></a>
<a href="/cadastro"><button>Cadastro</button></a>
<a href="/homepage"><button>Homepage</button></a>
<a href="/duvidas"><button>Duvidas</button></a>
<a href="/app"><button>App</button></a>
<a href="/appList"><button>AppList</button></a>

    <section id="appointment" class="appointment">
        <div class="container">
            <h2>Preencha os campos abaixo</h2>

            <form id="formCadastro" action="/app/add" method="POST" autocomplete="off">
                <div class="personal-data">
                    <div class="input-wrapper">
                        <label>Nome</label>
                        <input type="text" name="name" id="nameApp" placeholder="Digite o seu nome">
                        <span class="erro"></span>
                    </div>
                <div class="input-wrapper">
                    <label>RGA</label>
                    <input type="number" name="rga" id="rgaApp" placeholder="Digite o seu RGA">
                    <span class="erro"></span>
                </div>
                <div class="input-wrapper">
                    <label>E-mail</label>
                    <input type="email" name="email" id="emailApp" placeholder="Digite o seu e-mail" >
                    <span class="erro"></span>
                </div>
                <div class="input-wrapper">
                    <label>Curso</label>
                    <select id ="cursoApp" name="course">
                        <option value="">-- Selecione --</option>
                        <option value="Engenharia de Computação">Engenharia de Computação</option>
                        <option value="Engenharia de Controle e Automação">Engenharia de Controle e Automação</option>
                        <option value="Engenharia de Minas">Engenharia de Minas</option>
                        <option value="Engenharia de Transportes">Engenharia de Transportes</option>
                        <option value="Engenharia Química">Engenharia Química</option>
                    </select>
                    <span class="erro"></span>
                </div>
                <div class="input-wrapper">
                    <label>Telefone</label>
                    <input name="phone" type="number" id="telApp" placeholder="Digite o seu telefone">
                    <span class="erro"></span>
                </div>
                <div class="input-wrapper">
                    <label>Tipo</label>
                    <select name="type" id ="tipoApp">
                        <option value="">-- Selecione --</option>
                        <option value="Horas complementares">Horas complementares</option>
                        <option value="Horas de extensão">Horas de extensão</option>
                    </select>
                    <span class="erro"></span>
                </div>
                <div class="input-wrapper">
                    <label>Anexe seu certificado para comprovar suas horas (somente em PDF)</label>
                    <input type="file" accept=".pdf" name="file" id="arqApp">
                    <span class="erro"></span>
                </div>

                <div class="input-wrapper">
                    <label>Carga horária registrada no documento</label>
                    <input name="hrsD" type="number" id="hrsDApp" placeholder="Digite as hrs registradas">
                    <span class="erro"></span>
                </div>
            </div>
            
            <!-- <div class="input-wrapper">
                <label>Categoria das horas complementares</label>
                <select id ="categoriaApp" name="categA" required>
                    <option value="">-- Selecione --</option>
                    <optgroup label="Grupo I: Palestras e Cursos adicionais">
                        <option>Disciplinas de outros cursos, de outras IES, que não são aproveitadas como disciplinas obrigatórias ou optativas. Em todos os casos as instituições e cursos devem ser devidamente reconhecidos pelo MEC.
                        </option>
                        <option>Disciplinas de outros cursos da UFMT e que não são aproveitadas como disciplinas obrigatórias ou optativas.
                        </option>
                        <option>Participação efetiva e comprovada em semanas acadêmicas, palestras, programas de treinamento, jornadas, simpósios, seminários, congressos, encontros, <br><br>conferências, fóruns e outros eventos de ciência e tecnologia em áreas diretas e correlatas à Engenharia de Computação, promovidas pela UFMT, outras IES ou por órgãos públicos, conselhos, entidades da sociedade civil ou associações de classe.
                        </option>
                        <option>Participação em viagens de estudo no Brasil, organizadas pela UFMT ou por outra IES.
                        </option>
                        <option>Participação em viagens de estudo para o exterior organizadas pela UFMT ou por outra IES.
                        </option>
                        <option>Outras atividades propostas pelo discente, em qualquer campo do conhecimento afim ao universo acadêmico, sujeitas à avaliação do Colegiado de Curso de Engenharia de Computação quanto ao mérito para o discente e para o curso e ao tempo de duração.
                        </option>
                    </optgroup>
                    <optgroup label="Grupo II: Representação e participação em projetos">
                        <option>Representação discente junto a órgãos da UFMT, com comprovação de, no mínimo, 75% de participação efetiva, desde que o mandato representativo tenha, no mínimo, 12 horas de mandato.
                        </option>
                        <option>Bolsista remunerado ou voluntário de iniciação científica realizada no âmbito da UFMT, com o devido registro na Pró-Reitoria de Pesquisa e/ou participação no Seminário de Iniciação Científica.
                        </option>
                        <option>Monitoria em disciplinas da UFMT com a devida comprovação do Departamento ou do professor responsável e registro pela Pró-Reitoria de Ensino de Graduação.
                        </option>
                        <option>Atividades desenvolvidas como Bolsa PET (Programa de Educação Tutorial), Bolsa EaD (Educação à Distância) e demais bolsas acadêmicas.
                        </option>
                        <option>Outras atividades propostas pelo discente, em qualquer campo do conhecimento afim ao universo acadêmico, sujeitas à avaliação do Colegiado de Curso de Engenharia de Computação quanto ao mérito para o discente e para o curso e ao tempo de duração. 
                        </option>
                    </optgroup>
                    <optgroup label="Grupo III: Produção Científico-Tenológica">
                        <option>Publicação de artigo em periódico científico com ISSN, ou capítulo de livro com ISBN.
                        </option>
                        <option>Publicação de livro ou manual técnico com ISBN.
                        </option>
                        <option>Publicação de artigo ou resumo expandido em anais de eventos científicos.
                        </option>
                        <option>Publicação de resumo simples em anais de eventos científicos.
                        </option>
                        <option>Publicação de artigo em periódicos não científicos (magazines) ou em jornais
                        </option>
                        <option>Apresentação oral de trabalhos em eventos científicos
                        </option>
                        <option>Apresentação de trabalhos, por meio de pôster, banner, vídeo ou maquete, em eventos científicos.
                        </option>
                        <option>Prêmio em concursos de projetos, inovação tecnológica ou outra modalidade, em níveis internacional, nacional ou regional.
                        </option>
                        <option>Prêmio em concursos de projetos, inovação tecnológica ou outra modalidade, em nível local.
                        </option>
                        <option>Outras produções apresentadas pelo discente, em qualquer campo do conhecimento afim ao universo acadêmico, sujeitas à avaliação do Colegiado de Curso de Engenharia de Computação quanto ao mérito para o discente e para o curso e ao tempo de duração.
                        </option>
                    </optgroup>
                </select>
                <span class="erro"></span>
            </div> -->
            
            <div class="input-wrapper">
                <label>Mensagem (opcional)</label>
                <input name="msg" id="msgApp" maxlength="100" placeholder="Digite uma observação para o avaliador" >
            </div>   
        </div>
        <div class="btns-boxA">
            <div class="btnsA">
                <a href="homepage"><button type="button" onclick="irHp()" id="btnHp" class="btn">Voltar</button></a>
            </div>
        
            <div class="btnsA">
                <button class ="btn" type="submit" id="sendApp"> Enviar</button>
            </div>
        </div>
        </form>

    </section>


<section class="containerDb">
    <div class="storage"> 
        <table>
            <tr>
            <th>Nome</th>
            <th>RGA</th>
            <th>E-mail</th>
            <th>Curso</th>
            <th>Telefone</th>
            <th>Tipo</th>
            <th>Certificado anexado</th>
            <th>Carga horária registrada no documento</th>
            <th>Mensagem</th>
            <th colspan="2">Após excluir é necessário atualizar a página</th>
            </tr>

        
                <% dataUsers.forEach((data) => { %>
                <th>
                    <%= data.name %>
                </th>
                <th>
                    <%= data.rga %>
                </th>
                <th>
                    <%= data.email %>
                </th>
                <th>
                    <%= data.course %>
                </th>
                <th>
                    <%= data.phone %>
                </th>
                <th>
                    <%= data.type %>
                </th>
                <th>
                    <%= data.file %>
                    <br>
                    <br>
                    <button>Clique aqui para visualizar o certificado</button>
                </th>
                <th>
                   <%= data.hrsD %> 
                </th>
                <th>
                    <%= data.msg %>
                </th>
                <th>
                    <a href="/edit?id=<%= data._id%>">[Editar]</a>
                </th>
                <th>
                    <a href="/remove/<%= data._id %>">[Excluir]</a>
                </th>
                </tr>
                <% }) %>

        </table>
</div>

    <div class="dashboards">                 
        <div class="chartCard">
            <div class="chartBox">
                <canvas id="myChart1"></canvas>
                <b><small>Horas totais aproveitadas: 60</small></b>
                <br>
                <b><small>Horas faltam: 276</small></b>
            </div>
            <div class="chartBox">
                <canvas id="myChart2"></canvas>
                <b><small>Horas totais aproveitadas: 16</small></b>
                <br>
                <b><small>Horas faltam: 48 </small></b>
            </div>
        </div>

<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/chart.js/dist/chart.umd.min.js"></script>
    <script>
            const hrasE = 336
            const hrasER = 60
           // const hrasER = hrasER +
            const hrasC = 48
            const hrasCR = 16
           // const hrasCR = hrasCR + 
        var ctx = document.getElementById('myChart1').getContext('2d');
        var myChart2 = document.getElementById('myChart2').getContext('2d');

        var myChart = new Chart (ctx, {
            type: 'bar',
            data: {
                labels: ['Horas de extensão'],
                datasets: [{
                label:'Total de horas de extensão (336 Horas)',
                data: [hrasE],
                borderWidth: 3,
                borderColor: 'rgba(18, 94, 226, 1)',
                backgroundColor: 'rgba(18, 94, 226, 1)',
                type: 'line'
            },
            {
                label: "Horas aproveitadas",
                data: [hrasER],
                backgroundColor: ["rgba(39, 204, 136, 0.3)"],
                borderColor: ["rgba(39, 204, 136, 1)"],
                borderWidth: 3,
            },
            {
                label: "Horas faltantes",
                data: [hrasE-hrasER],
                backgroundColor: ["backgroundColor: '#27cc88',"],
                backgroundColor: ["rgba(255, 26, 104, 0.3)"],
                borderColor: ["rgba(255, 26, 104, 1)"],
                borderWidth: 3,
            }]
                },
            options: {
                responsive: true,
                scales: {
                    x: {
                        stacked: true,
                        
                    },
                    y: {
                        beginAtZero: true,
                        stacked: true,
                        max: 336,
                        ticks: {
                            count: 7
                        }
                    },
                    right: {beginAtZero: true,
                            position: 'right',
                            ticks: {
                            count: 7,
                            callback: ((value,index, ticks) =>{
                                return parseInt(value * 100) + '%'
                            })
                        }
                        }
                },
                }
            });

    var myChart = new Chart (myChart2, {
        type: 'bar',
        data: {
                labels: ['Horas Complementares'],
                datasets: [{
                label:'Total de horas complementares (48 Horas)',
                data: [hrasC],
                borderWidth: 3,
                borderColor: 'rgba(18, 94, 226, 1)',
                backgroundColor: 'rgba(18, 94, 226, 1)',
                type: 'line'
            },
            {
                label: "Horas aproveitadas",
                data: [hrasCR],
                backgroundColor: ["rgba(39, 204, 136, 0.3)"],
                borderColor: ["rgba(39, 204, 136, 1)"  ],
                borderWidth: 3,
            },
            {
                label: "Horas faltantes",
                data: [hrasC-hrasCR],
                backgroundColor: ["backgroundColor: '#27cc88',"],
                backgroundColor: ["rgba(255, 26, 104, 0.3)"],
                borderColor: ["rgba(255, 26, 104, 1)"],
                borderWidth: 3,
            }]
                
            },
        options: {
            responsive: true,
            scales: {
                x: {
                    stacked: true,
    
                },
                y: {
                    beginAtZero: true,
                    stacked: true,
                    max: 48,
                    ticks: {
                            count: 7
                        }
                    },
                    right: {beginAtZero: true,
                            position: 'right',
                            ticks: {
                            count: 7,
                            callback: ((value,index, ticks) =>{
                                return parseInt(value * 100) + '%'
                            })
                        }
                        }
                },
               
        
        }

  });
</script>    
</div>
    <footer class="footer">
    © 2023 UFMT - Todos os direitos reservados
    <br>
    Desenvolvido por Matheus Carvalho
    </footer>
</section>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="js/graph.js"></script>

</body>
</html>